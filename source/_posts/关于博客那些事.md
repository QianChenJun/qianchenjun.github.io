---
title: å…³äºåšå®¢é‚£äº›äº‹
tags:
  - Hexo
  - åšå®¢
  - æœåŠ¡å™¨
categories:
  - åƒè¾°çš„å°å°ç¬”è®°
abbrlink: 23f71013
date: 2022-04-26 13:54:24
updated: 2022-04-26 13:54:24
---

> æœ€è¿‘éšç€giteeå›¾åºŠåŠ äº†é˜²ç›—é“¾ï¼Œæˆ‘çš„Github page ä¸Šé¢çš„åšå®¢å›¾ç‰‡å…¨éƒ¨å¤±æ•ˆ....
>
> è¿‡äº†å¥½å¤šå¤©çš„æŸä¸ªä¸‹åˆçªç„¶å¿ƒè¡€æ¥æ½®æƒ³æŠŠå›¾ç‰‡çš„é“¾æ¥æ›´æ¢ä¸€ä¸‹ï¼Œæ»¡å¿ƒçƒ­è¡€çš„å°†æ¯ä¸€ä¸ªå›¾ç‰‡é‡æ–°ä¸Šä¼ åˆ°äº†Githubçš„ä»“åº“ã€‚
>
> ![2SSANR0JLMVTYF13F27CDA](https://cdn.jsdelivr.net/gh/QianChenJun/cloudimage@main/img/202204261410285.png)
>
> ç‚¹äº†å¥½ä¹…å¥½ä¹…ï¼Œç»ˆäºåœ¨æäº¤ä»£ç çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„é¡µé¢å…¨éƒ½ç‚¸äº†ã€‚ä¸æ­¤åŒæ—¶ï¼Œæˆ‘åŠ äº†GitHub ActionåŒæ­¥åˆ°çš„Gitee pageä¹Ÿç‚¸äº†...
>
> ![1](https://cdn.jsdelivr.net/gh/QianChenJun/cloudimage@main/img/202204261410889.png)
>
> æˆ‘å°è¯•äº†å¾ˆå¤šæ–¹æ³•å»æŒ½æ•‘ï¼Œæœ€ç»ˆæ— æœï¼Œæœ€åå¸¦ç€æˆ‘çš„pageåˆ åº“è·‘è·¯äº†...
>
> ![kasdfl](https://cdn.jsdelivr.net/gh/QianChenJun/cloudimage@main/img/202204261412408.png)
>
> ç„¶åä¸‹é¢çš„æ–‡ç« å°±è¯ç”Ÿäº†~~

*<!--more-->*





## åšå®¢çš„é€‰æ‹©

<blockquote class="info">
    æˆ‘ç›®å‰ä½¿ç”¨çš„ hexo + æœåŠ¡å™¨ + Githubä¿å­˜ä»£ç ï¼ˆæœåŠ¡å™¨åˆ°æœŸäº†è¿˜æœ‰ä¸ªGithub pageå…œåº•ï¼‰
</blockquote>

å…ˆæ¥çœ‹çœ‹ä¸€äº›åŒºåˆ«

|         ä¾›åº”å•†          |    åŸŸåç»‘å®š    |   ä»“åº“   | è®¿é—®é€Ÿåº¦ |
| :---------------------: | :------------: | :------: | :------: |
|       Gitee page        | ä¸æ”¯æŒï¼ˆåŠ é’±ï¼‰ | å¯ä»¥ç§æœ‰ |    å¿«    |
|       GIthub page       |      æ”¯æŒ      | åªèƒ½å…¬å¼€ |  é­”æ³•å¿«  |
| æœåŠ¡å™¨ï¼ˆé˜¿é‡Œã€è…¾è®¯...ï¼‰ |      æ”¯æŒ      |   ç§æœ‰   |    å¿«    |

> é€‰æ‹© Github å°±æ˜¯å› ä¸ºä»–èƒ½ç»‘å®šä¸€ä¸ªåŸŸå....





## Hexoæ­å»ºåšå®¢

> è¿™ä¸ªåœ°æ–¹é»˜è®¤ä½ å·²ç»æ‹¥æœ‰äº†[Nodejs](https://nodejs.org/zh-cn/)ç¯å¢ƒï¼Œå®‰è£…Gitç¯å¢ƒ [Git](https://git-scm.com/) ï¼ˆå¦‚æœå›½å†…é€Ÿåº¦å¤ªæ…¢ï¼Œå¯ä»¥è¯•è¯•[è¿™é‡Œ](https://pc.qq.com/detail/13/detail_22693.html)ï¼‰ï¼Œå·²ç»ä¸€ä¸ªä»¥è‡ªå·±åå­—å‘½åçš„ [Github](www.github.com)ä»“åº“

ç®—äº†è¿™ä¸€æ­¥çœç•¥äº†ï¼Œè¯·å‚è€ƒè¿™ç¯‡æ–‡ç« [æ•™ä½ å¦‚ä½•ä»é›¶å¼€å§‹æ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„ç½‘ç«™](https://www.yunyoujun.cn/share/how-to-build-your-site/)

## æœåŠ¡å™¨åšå®¢éƒ¨ç½²

> åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ åº”è¯¥æ˜¯æœ‰äº†ä¸€ä¸ªå¯ä»¥è®¿é—®çš„GitHub pageæ‰å¯¹...
>
> å¹¶ä¸”ä½ çš„æœåŠ¡å™¨å®‰è£…äº†[å®å¡”](https://www.bt.cn/new/index.html)

åœ¨å®å¡”é¢æ¿æ·»åŠ è‡ªå·±çš„ç«™ç‚¹

![image-20220426143759402](https://cdn.jsdelivr.net/gh/QianChenJun/cloudimage@main/img/202204261438156.png)

æ·»åŠ ç«™ç‚¹

![image-20220426143931208](https://cdn.jsdelivr.net/gh/QianChenJun/cloudimage@main/img/202204261439249.png)

ç„¶åå°†ä½ çš„`hexo g` ç”Ÿæˆçš„é™æ€æ–‡ä»¶æ–¹æ³•æ–‡ä»¶ç›®å½•ä¸‹å³å¯å¾—åˆ°ä¸€ä¸ªç½‘ç«™ã€‚



## åŒæ­¥æäº¤åˆ°Githubä»¥åŠæœåŠ¡å™¨

### æœåŠ¡å™¨ç«¯

> åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šé…ç½®å¥½ Git ä»“åº“åï¼Œæ‰èƒ½å°†æœ¬åœ°çš„ hexo push åˆ°è¿œç«¯ã€‚

1. å®‰è£… git **ï¼ˆè¿œç¨‹æœåŠ¡å™¨ä¸Šï¼‰**

   ```shell
   yum install git
   ```

2. é…ç½® git ç”¨æˆ·

   ```shell
   adduser git
   ```

3. èµ‹äºˆç”¨æˆ·æƒé™

   ```shell
   chmod 740 /etc/sudoers
   vi /etc/sudoers
   ```

4. è¾“å…¥ i è¿›å…¥ insert æ¨¡å¼ ï¼Œæ‰¾åˆ° root ALL=(ALL) ALL ï¼Œåœ¨å…¶ä¸‹æ–¹åŠ å…¥ä¸€è¡Œ git ALL=(ALL) ALL

   ```shell
   root    ALL=(ALL)       ALL
   // åœ¨è¿™é‡ŒåŠ å…¥ä»£ç 
   git     ALL=(ALL)       ALL
   ```

5. æŒ‰ä¸‹ ESC ï¼Œè¾“å…¥ `:wq` ï¼Œä¿å­˜ vim æ–‡ä»¶ã€‚

6. ä¿®æ”¹ sudoers æ–‡ä»¶æƒé™

   ```shell
   chmod 400 /etc/sudoers 
   ```

7. è®¾ç½® git ç”¨æˆ·çš„å¯†ç 

   ```shell
   sudo passwd git
   ```

8. ç»™ git ç”¨æˆ·æ·»åŠ  ssh ç§˜é’¥ ï¼ˆæ‰¾åˆ°**æœ¬åœ°**çš„ ssh å…¬é’¥ï¼Œéƒ¨ç½² hexo åˆ° GitHub æ—¶æœ‰ç”Ÿæˆï¼Œä»¥ .pub ç»“å°¾ï¼‰

   ![image-20220426144517908](https://cdn.jsdelivr.net/gh/QianChenJun/cloudimage@main/img/202204261445095.png)

   ```shell
   su - git
   mkdir -p ~/.ssh
   touch ~/.ssh/authorized_keys
   chmod 600 ~/.ssh/authorzied_keys
   chmod 700 ~/.ssh
   vim ~/.ssh/authorized_keys    #å°†sshå¯†é’¥ç²˜è´´è¿›å»
   ```

   å¦‚æœä½ æœ‰å¤šä¸ªå¯†é’¥ï¼ˆä¹Ÿå°±æ˜¯ä½ æœ‰å¤šå°ç”µè„‘ï¼‰ï¼Œåœ¨ç¼–è¾‘ä¸Šé¢çš„æ–‡ä»¶çš„æ—¶å€™ï¼Œ**å¤šä¸ªå¯†é’¥ä¹‹é—´è¦ç©ºä¸€è¡Œ**.

9. åœ¨æœ¬åœ°æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œä»¥ ssh çš„æ–¹å¼ç™»å½•äº‘æœåŠ¡å™¨

   ```shell
   ssh -v git@ä½ çš„ ip åœ°å€
   // è¾“å…¥å¯†ç  å³å¯æˆåŠŸç™»å½•äº‘æœåŠ¡å™¨
   ```

10. åˆ›å»ºä¸€ä¸ª git ä»“åº“ï¼Œæ–°å»ºä¸€ä¸ª post-receive æ–‡ä»¶ï¼Œç”¨æ¥å­˜å‚¨æœ¬åœ°çš„æäº¤ã€‚

    ```shell
    su root
    cd /home/git  # è¿œç¨‹ä»“åº“ä½œä¸ºgitçš„ç›®å½•ï¼Œå¯ä»¥æ›´æ”¹
    git init --bare blog.git  #åœ¨/home/gitä¸‹åˆ›å»ºæ–°ä»“åº“blog.git
    chown git:git -R blog.git #ç»™äºˆgitç”¨æˆ·æƒé™
    ```

11. åœ¨ blog.git/hooks æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª post-receive é’©å­ï¼Œ<b style="color: #FF0000">æŠŠæäº¤åˆ° git ä»“åº“çš„æ–‡ä»¶åŒæ­¥åˆ°ä½ çš„æœåŠ¡å™¨æ”¾ç½®é™æ€æ–‡ä»¶çš„æ–‡ä»¶å¤¹ä¸­</b>

    ```shell
    cd blog.git/hooks
    vim post-receive
    ```

12. åœ¨ post-receive æ–‡ä»¶ä¸­è¾“å…¥ä»¥ä¸‹ä»£ç 

    ```shell
     #!/bin/bash 
      git --work-tree=/www/wwwroot/xxxx c=/home/git/blog.git checkout -f
    ```

    **æ³¨æ„ï¼š`--work-tree `æ˜¯ä½ æ”¾åšå®¢æ–‡ä»¶çš„åœ°æ–¹ï¼Œä¹Ÿå°±æ˜¯åœ¨æœåŠ¡å™¨éƒ¨ç½²åšå®¢çš„æ—¶å€™æ‰€é€‰çš„ç›®å½•**ã€‚

    **`--work-tree`æ˜¯ç¬¬åæ­¥åˆ›å»ºçš„gitç›®å½•**

13. æˆäºˆ post-receive æ–‡ä»¶å¯æ‰§è¡Œæƒé™

    ```shell
    chmod +x /home/git/blog.git/hooks/post-receive
    ```

æœåŠ¡å™¨ç«¯å®ŒæˆğŸ™ŒğŸ™Œ



### æœ¬åœ°

æ‰“å¼€ hexo çš„é…ç½®æ–‡ä»¶ _config.yml ä¿®æ”¹ Deployment ä½ç½®çš„é…ç½®

```yml
deploy:
  type: git
  repo:
        # æäº¤åˆ°GitHub
        github: githubä»“åº“åœ°å€,master
        # æäº¤åˆ°æœåŠ¡å™¨
        hexo: root@ä½ çš„ipåœ°å€:/home/git/blog.git,master
  # branch: master # é»˜è®¤ä½¿ç”¨ master åˆ†æ”¯
  message: Update Hexo Static Content # ä½ å¯ä»¥è‡ªå®šä¹‰æ­¤æ¬¡éƒ¨ç½²æ›´æ–°çš„è¯´æ˜
```

é…ç½®å®Œæˆä¹‹åï¼Œå†é€šè¿‡hexoè¿›è¡Œæäº¤çš„æ—¶å€™ä½ å°±ä¼šåœ¨GitHubä»¥åŠä½ çš„æœåŠ¡å™¨éƒ½æ”¶åˆ°ä»£ç çš„æ›´æ–°

è‡³æ­¤å®¢æˆ·ç«¯å®ŒæˆğŸ’–ğŸ’–

**é™„é€ä¸€ä¸ªshæäº¤å‘½ä»¤**

```shell
hexo clean
hexo g
hexo d

sleep 1.5

info=$1
if ["$info" = ""];
then info=":pencil: update content"
fi
git pull
git add -A
git commit -m "$info"
git push
```

åœ¨åšå®¢çš„æ ¹ç›®å½•åˆ›å»º`hexo.sh`ï¼Œå°†ä¸Šè¿°ä»£ç ç²˜è¿›å»ï¼Œè¾“å…¥`sh hexo.sh`æ‰§è¡Œæäº¤å‘½ä»¤.





## Githubå›¾åºŠ

> **æ²¡æœ‰é­”æ³•å›¾ç‰‡å¾ˆå¡**

ä¸å†™äº†ï¼Œçœ‹è¿™ä¸ª [Typora+PicGoè®¾ç½®GitHubå›¾åºŠ](https://blog.csdn.net/weixin_45965432/article/details/108911937)
